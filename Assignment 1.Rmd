---
title: "Assignment 1"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include= F}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F )
```

```{r loading libraries}
library(tidyverse)
library(plotly)
library(sf)
library(tigris)
library(leaflet)
library(censusapi)

sys.setenv(CENSUS_KEY="c8aa67e4086b4b5ce3a8717f59faa9a28f611dab")
```

```{r elec. & gas use}
years <- 2017:2020
quarters <- 1:4
pge_17_to_20_gas_and_elec <- NULL

for (i in 1:14) {
  for (year in years) {
    for (quarter in quarters) {
      filename <- 
        paste0(
          "PGE_",
          year,
          "_Q",
          quarter,
          "_",
          "Electric",
          "UsageByZip.csv"
        )
      print(filename)
      temp_file <- read_csv(filename)
      pge_17_to_20_gas_and_elec <- rbind(pge_17_to_20_gas_and_elec, temp_file)
      saveRDS(pge_17_to_20_gas_and_elec, "pge_17_to_20_gas_and_elec.rds")
    }
  }
}


for (i in 1:14) {
  for (year in years) {
    for (quarter in quarters) {
      filename <- 
        paste0(
          "PGE_",
          year,
          "_Q",
          quarter,
          "_",
          "Gas",
          "UsageByZip.csv"
        )
      print(filename)
      temp_file <- read_csv(filename)
      pge_17_to_20_gas_and_elec <- rbind(pge_17_to_20_gas_and_elec, temp_file)
      saveRDS(pge_17_to_20_gas_and_elec, "pge_17_to_20_gas_and_elec.rds")
    }
  }
}

```


